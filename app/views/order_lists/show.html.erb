<div id="content_detail" class="ui-corner-all ui-widget-content">
<h1 class="title"><%= t('page.showing', model: t('activerecord.models.order_list')) -%></h1>
<div id="content_list">
<p id="notice"><%= notice %></p>

<% if @order_list.user %>
<p>
  <strong><%= t('activerecord.models.user') -%>:</strong>
  <%= link_to @order_list.user.username, @order_list.user -%>
</p>
<% end %>

<p>
  <strong><%= t('activerecord.attributes.order_list.title') -%>:</strong>
  <%= @order_list.title -%>
</p>

<p>
  <strong><%= t('activerecord.models.bookstore') -%>:</strong>
  <%= link_to @order_list.bookstore.name, @order_list.bookstore -%>
</p>

<p>
  <strong><%= t('activerecord.attributes.order_list.state') -%>:</strong>
  <%= localized_order_state(@order_list.state) -%>
</p>

<p>
  <strong><%= t('activerecord.attributes.order_list.ordered_at') -%>:</strong>
  <%= l(@order_list.ordered_at) if @order_list.ordered_at -%>
</p>

<p>
  <strong><%= t('activerecord.attributes.order_list.note') -%>:</strong>
  <%= @order_list.note -%>
</p>

<p>
  <strong><%= t('activerecord.attributes.order_list.total_price') -%>:</strong>
  <%= number_to_currency(@order_list.total_price, unit: '') -%>
</p>

</div>

<table style="margin-left: 30px;">
  <tr>
    <th><%= t('activerecord.attributes.order.purchase_order_number') %></th>
    <th><%= t('activerecord.attributes.manifestation.isbn') %></th>
    <th><%= t('activerecord.attributes.manifestation.original_title') %></th>
    <th><%= t('activerecord.attributes.order.price_string_on_order') %></th>
    <th><%= t('activerecord.attributes.order.accept_status') %></th>
    <th> &nbsp; </th>
  </tr>
  <% @order_list.orders.each do |o| %>
    <tr>
      <td><%= o.purchase_order_number %></td>
      <td><%= o.item.manifestation.isbn %></td>
      <td><%= o.item.manifestation.original_title %></td>
      <td style="text-align: right;"><%= number_to_currency(o.price_string_on_order, unit: '') %></td>
      <td><%= accept_status(o) %></td>
      <td>
        <%- if @order_list.can_destroy? -%>
          <%= link_to t('order_list.remove_order_list'), o, :confirm => t('page.are_you_sure'), :method => :delete -%>
        <%- end -%>
        <%- if o.can_cancel? -%>
          <%= link_to t('order_list.cancel_after_ordered'), o, :confirm => t('page.are_you_sure'), :method => :delete -%>
        <%- end -%>
      </td>
    </tr>
  <% end %>
</table>
<br />
</div>

<div id="submenu" class="ui-corner-all ui-widget-content">
  <ul>
    <li><%= link_to t('page.edit'), edit_order_list_path(@order_list) -%></li>
    <li><%= back_to_index(flash[:page_info]) -%></li>
  </ul>
  <br />
  <ul>
    <% if @order_list.available_order? %>
      <li><%= link_to t('order_list.do_order'), do_order_order_list_path(@order_list) %></li>
    <% else %>
      <p style="color: grey"><%= t('order_list.ordered_label') %></p>
      <li><%= link_to t('order_list.order_letter'), order_letter_order_list_path(@order_list) %></li>
    <% end %>
  </ul>
</div>
